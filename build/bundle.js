var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function s(){return Object.create(null)}function r(e){e.forEach(o)}function a(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}const i="undefined"!=typeof window;let c=i?()=>window.performance.now():()=>Date.now(),u=i?e=>requestAnimationFrame(e):e;const d=new Set;function f(e){d.forEach((t=>{t.c(e)||(d.delete(t),t.f())})),0!==d.size&&u(f)}function m(e,t){e.appendChild(t)}function p(e,t,n){e.insertBefore(t,n||null)}function $(e){e.parentNode.removeChild(e)}function h(e){return document.createElement(e)}function g(e){return document.createTextNode(e)}function _(){return g(" ")}function v(){return g("")}function k(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function b(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function T(e,t,n){e.classList[n?"add":"remove"](t)}function j(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const C=new Set;let D,S=0;function z(e,t,n,o,s,r,a,l=0){const i=16.666/o;let c="{\n";for(let e=0;e<=1;e+=i){const o=t+(n-t)*r(e);c+=100*e+`%{${a(o,1-o)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${l}`,f=e.ownerDocument;C.add(f);const m=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(h("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[d]||(p[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const $=e.style.animation||"";return e.style.animation=`${$?`${$}, `:""}${d} ${o}ms linear ${s}ms 1 both`,S+=1,d}function O(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-o.length;s&&(e.style.animation=o.join(", "),S-=s,S||u((()=>{S||(C.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),C.clear())})))}function E(e){D=e}function q(){const e=function(){if(!D)throw new Error("Function called outside component initialization");return D}();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const s=j(t,n);o.slice().forEach((t=>{t.call(e,s)}))}}}const M=[],A=[],N=[],F=[],R=Promise.resolve();let P=!1;function I(e){N.push(e)}function J(e){F.push(e)}let L=!1;const B=new Set;function U(){if(!L){L=!0;do{for(let e=0;e<M.length;e+=1){const t=M[e];E(t),G(t.$$)}for(E(null),M.length=0;A.length;)A.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];B.has(t)||(B.add(t),t())}N.length=0}while(M.length);for(;F.length;)F.pop()();P=!1,L=!1,B.clear()}}function G(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(I)}}let H;function W(e,t,n){e.dispatchEvent(j(`${t?"intro":"outro"}${n}`))}const Y=new Set;let X;function K(){X={r:0,c:[],p:X}}function Q(){X.r||r(X.c),X=X.p}function V(e,t){e&&e.i&&(Y.delete(e),e.i(t))}function Z(e,t,n,o){if(e&&e.o){if(Y.has(e))return;Y.add(e),X.c.push((()=>{Y.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const ee={duration:0};function te(n,o,s,l){let i=o(n,s),m=l?0:1,p=null,$=null,h=null;function g(){h&&O(n,h)}function _(e,t){const n=e.b-m;return t*=Math.abs(n),{a:m,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function v(o){const{delay:s=0,duration:a=300,easing:l=t,tick:v=e,css:k}=i||ee,y={start:c()+s,b:o};o||(y.group=X,X.r+=1),p||$?$=y:(k&&(g(),h=z(n,m,o,a,s,l,k)),o&&v(0,1),p=_(y,a),I((()=>W(n,o,"start"))),function(e){let t;0===d.size&&u(f),new Promise((n=>{d.add(t={c:e,f:n})}))}((e=>{if($&&e>$.start&&(p=_($,a),$=null,W(n,p.b,"start"),k&&(g(),h=z(n,m,p.b,p.duration,0,l,i.css))),p)if(e>=p.end)v(m=p.b,1-m),W(n,p.b,"end"),$||(p.b?g():--p.group.r||r(p.group.c)),p=null;else if(e>=p.start){const t=e-p.start;m=p.a+p.d*l(t/p.duration),v(m,1-m)}return!(!p&&!$)})))}return{run(e){a(i)?(H||(H=Promise.resolve(),H.then((()=>{H=null}))),H).then((()=>{i=i(),v(e)})):v(e)},end(){g(),p=$=null}}}function ne(e,t){e.d(1),t.delete(e.key)}function oe(e,t){Z(e,1,1,(()=>{t.delete(e.key)}))}function se(e,t,n,o,s,r,a,l,i,c,u,d){let f=e.length,m=r.length,p=f;const $={};for(;p--;)$[e[p].key]=p;const h=[],g=new Map,_=new Map;for(p=m;p--;){const e=d(s,r,p),l=n(e);let i=a.get(l);i?o&&i.p(e,t):(i=c(l,e),i.c()),g.set(l,h[p]=i),l in $&&_.set(l,Math.abs(p-$[l]))}const v=new Set,k=new Set;function y(e){V(e,1),e.m(l,u),a.set(e.key,e),u=e.first,m--}for(;f&&m;){const t=h[m-1],n=e[f-1],o=t.key,s=n.key;t===n?(u=t.first,f--,m--):g.has(s)?!a.has(o)||v.has(o)?y(t):k.has(s)?f--:_.get(o)>_.get(s)?(k.add(o),y(t)):(v.add(s),f--):(i(n,a),f--)}for(;f--;){const t=e[f];g.has(t.key)||i(t,a)}for(;m;)y(h[m-1]);return h}function re(e,t){const n={},o={},s={$$scope:1};let r=e.length;for(;r--;){const a=e[r],l=t[r];if(l){for(const e in a)e in l||(o[e]=1);for(const e in l)s[e]||(n[e]=l[e],s[e]=1);e[r]=l}else for(const e in a)s[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}function ae(e){return"object"==typeof e&&null!==e?e:{}}function le(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function ie(e){e&&e.c()}function ce(e,t,n,s){const{fragment:l,on_mount:i,on_destroy:c,after_update:u}=e.$$;l&&l.m(t,n),s||I((()=>{const t=i.map(o).filter(a);c?c.push(...t):r(t),e.$$.on_mount=[]})),u.forEach(I)}function ue(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function de(e,t){-1===e.$$.dirty[0]&&(M.push(e),P||(P=!0,R.then(U)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fe(t,n,o,a,l,i,c=[-1]){const u=D;E(t);const d=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:l,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:s(),dirty:c,skip_bound:!1};let f=!1;if(d.ctx=o?o(t,n.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return d.ctx&&l(d.ctx[e],d.ctx[e]=s)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](s),f&&de(t,e)),n})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach($)}else d.fragment&&d.fragment.c();n.intro&&V(t.$$.fragment),ce(t,n.target,n.anchor,n.customElement),U()}E(u)}class me{$destroy(){ue(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function pe(e){return e&&0!==e?function(e){return e&&0!==e?new Date(1e3*e).toDateString():""}(e)+" at "+function(e){let t=new Date(1e3*e);return`${t.getHours()}:${t.getMinutes()}`}(e):""}function $e(e){let t=new Date(1e3*e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}function he(e){let t=$e(e),n=Date.now()/1e3;return!t&&e<n}function ge(e){let t=$e(e),n=Date.now()/1e3;return!t&&e>n}let _e="https://bulletapi.blakwurm.com/";let ve={},ke={};async function ye(){ve=JSON.parse(localStorage.getItem("users"))||ve,ke=JSON.parse(localStorage.getItem("tasks"))||ke,await Promise.all(Object.keys(ve).map((e=>Ce(e))))}let xe={login_change:()=>{},tasks_change:()=>{}};function we(e){xe=e}async function be(e,t){let n=new FormData;n.append("username",e),n.append("password",t);let o={};try{let e=await fetch(_e+"token/",{method:"POST",body:n}),{token:t,refresh_token:s,token_type:r,status:a,message:l}=await e.json();if(1!=a)throw new Error("nope");e=await fetch(`${_e}me/`,{method:"GET",headers:{Authorization:`${r} ${t}`}}),e=await e.json();let{username:i,id:c}=e.data;i&&(o={token:t,refresh_token:s,username:i,token_type:r,id:c},ve[c]=o,ve=Object.assign({},ve),localStorage.setItem("users",JSON.stringify(ve)),ke[c]||(ke[c]={},localStorage.setItem("tasks",JSON.stringify(ke))),xe.login_change(Math.random()))}catch(e){console.error(e)}return console.log(o),o}async function Te(e,t,n="GET",o={}){let s=ve[t],r={method:n,headers:{Authorization:`${s.token_type} ${s.token}`}};e=function(e,t){let n="?";for(let[t,o]of Object.entries(e))n=`${n}${t}=${encodeURIComponent(o)}&`;return"?"===n?t:t+n}(o,e);let a=null;try{a=await fetch(`${_e}${e}`,r)}catch(e){throw e}if(401===a.status){if(await async function(e){let t=ve[e],{token:n,refresh_token:o}=t,s={method:"POST",body:JSON.stringify({token:n,refresh_token:o})},r=await fetch(`${_e}token/refresh/`,s);if(200===r.status){let e=await r.json();return Object.assign(t,e),localStorage.setItem("users",JSON.stringify(ve)),console.log(ve),!0}await De()}(t))return await Te(e,t,n,o)}let l=await a.json();return 1===l.status?l.data:void 0}function je(e){if(!e)return;e.id&&(e=[e]);let t=Object.assign({},ke);return e?.forEach((e=>t[e.owner_id][e.id]=e)),ke=t,localStorage.setItem("tasks",JSON.stringify(ke)),xe.tasks_change(Math.random()),e}async function Ce(e){return je(await Te("tasks",e))}function De(e){delete ve[e],localStorage.setItem("users",JSON.stringify(ve)),xe.login_change(Math.random())}function Se(e,t,n,o){return async function(e,t,n,o,s){let r=`${e}/${o}/action/${t}`;null!=s&&(r+=`/${s}`);return je(await Te(r,n,"PUT"))}("task",e,t,n,o)}async function ze(e,t,n){let o={text:t};n&&(o.due=n);let s=await Te("task",e,"POST",o);return await je(s)}var Oe=Object.freeze({__proto__:null,api_root:_e,event_kinds:{activate:"activate",makenote:"makenote",delegate:"delegate",deffer:"deffer",cancel:"cancel",reschedule:"reschedule",strike:"strike",complete:"complete",reactivate:"reactivate",changedue:"changedue"},get users(){return ve},get tasks(){return ke},init:ye,set_watcher:we,login:be,fetch_all_tasks:Ce,fetch_active_tasks:async function(e){return je(await Te("tasks",e,"GET",{active:!0}))},fetch_tasks_by_query:async function(e,t){return je(await Te("tasks",e,"GET",t))},logout:De,task_act:Se,make_new_task:ze});function Ee(t){let n,o,s,r,a;return{c(){n=h("button"),o=g(t[5]),y(n,"title",t[4]),y(n,"class",s=(t[1]?"selected":"")+" "+(t[0]?"active":"")+" "+(t[2]?"rightmost":"")+" "+(t[3]?"leftmost":"")+" svelte-jysgjr")},m(e,s){p(e,n,s),m(n,o),r||(a=k(n,"click",t[6]),r=!0)},p(e,[t]){32&t&&x(o,e[5]),16&t&&y(n,"title",e[4]),15&t&&s!==(s=(e[1]?"selected":"")+" "+(e[0]?"active":"")+" "+(e[2]?"rightmost":"")+" "+(e[3]?"leftmost":"")+" svelte-jysgjr")&&y(n,"class",s)},i:e,o:e,d(e){e&&$(n),r=!1,a()}}}function qe(e,t,n){const o=q();let{active:s=!1}=t,{selected:r=!1}=t,{confirm:a=!0}=t,{confirm_text:l="Sure?"}=t,{text:i="Act"}=t,{name:c=i}=t,{alt:u=i}=t,{confirm_alt:d=l}=t,{confirmtime:f=1500}=t,{rightmost:m=!0}=t,{leftmost:p=!0}=t,{action:$=function(){}}=t,h=u,g=i,_=!1,v=null;function k(){n(5,g=i),n(4,h=u),_=!1}return e.$$set=e=>{"active"in e&&n(0,s=e.active),"selected"in e&&n(1,r=e.selected),"confirm"in e&&n(7,a=e.confirm),"confirm_text"in e&&n(8,l=e.confirm_text),"text"in e&&n(9,i=e.text),"name"in e&&n(10,c=e.name),"alt"in e&&n(11,u=e.alt),"confirm_alt"in e&&n(12,d=e.confirm_alt),"confirmtime"in e&&n(13,f=e.confirmtime),"rightmost"in e&&n(2,m=e.rightmost),"leftmost"in e&&n(3,p=e.leftmost),"action"in e&&n(14,$=e.action)},[s,r,m,p,h,g,function(e){_||!a?(k(),$(),o("confirm-click",{name:c,text:i}),clearTimeout(v)):(_=!0,n(5,g=l),n(4,h=d),v=setTimeout(k,f))},a,l,i,c,u,d,f,$]}class Me extends me{constructor(e){super(),fe(this,e,qe,Ee,l,{active:0,selected:1,confirm:7,confirm_text:8,text:9,name:10,alt:11,confirm_alt:12,confirmtime:13,rightmost:2,leftmost:3,action:14})}}function Ae(e,t,n){const o=e.slice();return o[5]=t[n],o}function Ne(e){let t,n,o,s=e[5].username+"";return{c(){t=h("option"),n=g(s),t.__value=o=e[5].id,t.value=t.__value},m(e,o){p(e,t,o),m(t,n)},p(e,r){2&r&&s!==(s=e[5].username+"")&&x(n,s),2&r&&o!==(o=e[5].id)&&(t.__value=o,t.value=t.__value)},d(e){e&&$(t)}}}function Fe(e){let t,n,o,s,r,a,l,i,c,u,d,f,g,v,x;o=new Me({props:{text:"⚙️"}});let w=e[1],T=[];for(let t=0;t<w.length;t+=1)T[t]=Ne(Ae(e,w,t));return f=new Me({props:{text:"Logoff"}}),f.$on("confirm-click",e[4]),{c(){t=h("ul"),n=h("li"),ie(o.$$.fragment),s=_(),r=h("li"),r.innerHTML='<h1 class="svelte-1ny3dlx">BlakBullet</h1>',a=_(),l=h("li"),i=h("div"),c=h("select");for(let e=0;e<T.length;e+=1)T[e].c();u=h("option"),u.textContent="Add User",d=_(),ie(f.$$.fragment),y(n,"class","svelte-1ny3dlx"),y(r,"class","svelte-1ny3dlx"),u.__value="new",u.value=u.__value,y(c,"name","viewuser"),y(c,"id","viewuser"),y(c,"class","svelte-1ny3dlx"),void 0===e[0]&&I((()=>e[3].call(c))),y(i,"id","whoslogged"),y(l,"class","svelte-1ny3dlx"),y(t,"class","svelte-1ny3dlx")},m($,h){p($,t,h),m(t,n),ce(o,n,null),m(t,s),m(t,r),m(t,a),m(t,l),m(l,i),m(i,c);for(let e=0;e<T.length;e+=1)T[e].m(c,null);m(c,u),b(c,e[0]),m(i,d),ce(f,i,null),g=!0,v||(x=k(c,"change",e[3]),v=!0)},p(e,[t]){if(2&t){let n;for(w=e[1],n=0;n<w.length;n+=1){const o=Ae(e,w,n);T[n]?T[n].p(o,t):(T[n]=Ne(o),T[n].c(),T[n].m(c,u))}for(;n<T.length;n+=1)T[n].d(1);T.length=w.length}3&t&&b(c,e[0])},i(e){g||(V(o.$$.fragment,e),V(f.$$.fragment,e),g=!0)},o(e){Z(o.$$.fragment,e),Z(f.$$.fragment,e),g=!1},d(e){e&&$(t),ue(o),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(T,e),ue(f),v=!1,x()}}}function Re(e,t,n){let{userlist:o}=t,{current_user:s}=t;function r(){De(s),n(0,s="logout")}return e.$$set=e=>{"userlist"in e&&n(1,o=e.userlist),"current_user"in e&&n(0,s=e.current_user)},[s,o,r,function(){s=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,s),n(1,o)},()=>r()]}class Pe extends me{constructor(e){super(),fe(this,e,Re,Fe,l,{userlist:1,current_user:0})}}function Ie(e,t,n){const o=e.slice();return o[5]=t[n],o}function Je(e){let t,n,o,s,r,a,l,i,c,u,d,f,v,k,w,b,T,j,C,D,S,z=e[5].type+"",O=e[5].kind+"",E=pe(e[5].date)+"",q=pe(e[5].date_to)+"",M=e[5].text+"",A=e[5].meta+"";return{c(){t=h("li"),n=h("ul"),o=h("li"),s=g(z),r=_(),a=h("li"),l=g(O),i=_(),c=h("li"),u=g(E),d=_(),f=h("li"),v=g(q),k=_(),w=h("li"),b=g(M),T=_(),j=h("li"),C=g(A),S=_(),y(o,"class","type svelte-j0orzr"),y(a,"class","kind svelte-j0orzr"),y(c,"class","date svelte-j0orzr"),y(f,"class","date-to svelte-j0orzr"),y(w,"class","subtext svelte-j0orzr"),y(j,"class","meta svelte-j0orzr"),y(n,"class",D=e[5].type+" "+e[5].kind+" history-item svelte-j0orzr"),y(t,"class","svelte-j0orzr")},m(e,$){p(e,t,$),m(t,n),m(n,o),m(o,s),m(n,r),m(n,a),m(a,l),m(n,i),m(n,c),m(c,u),m(n,d),m(n,f),m(f,v),m(n,k),m(n,w),m(w,b),m(n,T),m(n,j),m(j,C),m(t,S)},p(e,t){1&t&&z!==(z=e[5].type+"")&&x(s,z),1&t&&O!==(O=e[5].kind+"")&&x(l,O),1&t&&E!==(E=pe(e[5].date)+"")&&x(u,E),1&t&&q!==(q=pe(e[5].date_to)+"")&&x(v,q),1&t&&M!==(M=e[5].text+"")&&x(b,M),1&t&&A!==(A=e[5].meta+"")&&x(C,A),1&t&&D!==(D=e[5].type+" "+e[5].kind+" history-item svelte-j0orzr")&&y(n,"class",D)},d(e){e&&$(t)}}}function Le(e,t){let n,o,s=(!t[2]||"note"===t[5].type)&&Je(t);return{key:e,first:null,c(){n=v(),s&&s.c(),o=v(),this.first=n},m(e,t){p(e,n,t),s&&s.m(e,t),p(e,o,t)},p(e,n){(t=e)[2]&&"note"!==t[5].type?s&&(s.d(1),s=null):s?s.p(t,n):(s=Je(t),s.c(),s.m(o.parentNode,o))},d(e){e&&$(n),s&&s.d(e),e&&$(o)}}}function Be(t){let n,o,s,a,l,i,c,u,d,f=t[2]?"Show Events":"Hide Events",v=[],w=new Map,b=t[1]?"Contract":"Expand",j=t[0];const C=e=>e[5].type+e[5].id;for(let e=0;e<j.length;e+=1){let n=Ie(t,j,e),o=C(n);w.set(o,v[e]=Le(o,n))}return{c(){n=h("button"),o=g(f),s=_(),a=h("ul");for(let e=0;e<v.length;e+=1)v[e].c();l=_(),i=h("button"),c=g(b),y(n,"class","hideit svelte-j0orzr"),y(a,"class","mainlist svelte-j0orzr"),T(a,"expanded",t[1]),y(i,"class","expando svelte-j0orzr")},m(e,r){p(e,n,r),m(n,o),p(e,s,r),p(e,a,r);for(let e=0;e<v.length;e+=1)v[e].m(a,null);p(e,l,r),p(e,i,r),m(i,c),u||(d=[k(n,"click",t[3]),k(i,"click",t[4])],u=!0)},p(e,[t]){4&t&&f!==(f=e[2]?"Show Events":"Hide Events")&&x(o,f),5&t&&(j=e[0],v=se(v,t,C,1,e,j,w,a,ne,Le,null,Ie)),2&t&&T(a,"expanded",e[1]),2&t&&b!==(b=e[1]?"Contract":"Expand")&&x(c,b)},i:e,o:e,d(e){e&&$(n),e&&$(s),e&&$(a);for(let e=0;e<v.length;e+=1)v[e].d();e&&$(l),e&&$(i),u=!1,r(d)}}}function Ue(e,t,n){let{history:o=[]}=t,s=!1,r=!0;return e.$$set=e=>{"history"in e&&n(0,o=e.history)},[o,s,r,()=>{n(2,r=!r)},()=>{n(1,s=!s)}]}class Ge extends me{constructor(e){super(),fe(this,e,Ue,Be,l,{history:0})}}function He(e){let t,n,o,s,r,a,l,i;function c(t){e[2](t)}let u={selector:"true",items:[{text:"📅",alt:"Current Tasks",name:"current",confirm:!1},{text:"🔮",alt:"Future Tasks",name:"future",confirm:!1},{text:"👻",alt:"Past Tasks",name:"past",confirm:!1},{text:"✅",alt:"Completed Tasks",name:"completed",confirm:!1},{text:"❌",alt:"Deactivated Tasks",name:"deactivated",confirm:!1},{text:"☢️",alt:"Active Tasks",name:"active",confirm:!1},{text:"🔎",alt:"Search All Tasks",name:"search",confirm:!1}]};return void 0!==e[0]&&(u.selected=e[0]),n=new et({props:u}),A.push((()=>le(n,"selected",c))),n.$on("confirm-click",We),l=new Me({props:{text:"Add +"}}),l.$on("confirm-click",e[1]),{c(){t=h("div"),ie(n.$$.fragment),s=_(),r=h("ul"),a=h("li"),ie(l.$$.fragment),y(a,"class","svelte-didgga"),y(r,"class","svelte-didgga"),y(t,"class","svelte-didgga")},m(e,o){p(e,t,o),ce(n,t,null),m(t,s),m(t,r),m(r,a),ce(l,a,null),i=!0},p(e,[t]){const s={};!o&&1&t&&(o=!0,s.selected=e[0],J((()=>o=!1))),n.$set(s)},i(e){i||(V(n.$$.fragment,e),V(l.$$.fragment,e),i=!0)},o(e){Z(n.$$.fragment,e),Z(l.$$.fragment,e),i=!1},d(e){e&&$(t),ue(n),ue(l)}}}function We(e){console.log(e)}function Ye(e,t,n){const o=q();let{filtermethod:s="past"}=t;return e.$$set=e=>{"filtermethod"in e&&n(0,s=e.filtermethod)},e.$$.update=()=>{1&e.$$.dirty&&console.log(s)},[s,function(){o("addnew")},function(e){s=e,n(0,s)}]}class Xe extends me{constructor(e){super(),fe(this,e,Ye,He,l,{filtermethod:0})}}function Ke(e,t,n){const o=e.slice();return o[5]=t[n],o}function Qe(e,t){let o,s,r,a;const l=[t[5],{selected:!(!t[2]||t[5].name!==t[1])}];let i={};for(let e=0;e<l.length;e+=1)i=n(i,l[e]);return s=new Me({props:i}),s.$on("confirm-click",t[3]),{key:e,first:null,c(){o=h("li"),ie(s.$$.fragment),r=_(),y(o,"class","svelte-198lrs7"),this.first=o},m(e,t){p(e,o,t),ce(s,o,null),m(o,r),a=!0},p(e,n){t=e;const o=7&n?re(l,[1&n&&ae(t[5]),{selected:!(!t[2]||t[5].name!==t[1])}]):{};s.$set(o)},i(e){a||(V(s.$$.fragment,e),a=!0)},o(e){Z(s.$$.fragment,e),a=!1},d(e){e&&$(o),ue(s)}}}function Ve(e){let t,n,o=[],s=new Map,r=e[0];const a=e=>e[5];for(let t=0;t<r.length;t+=1){let n=Ke(e,r,t),l=a(n);s.set(l,o[t]=Qe(l,n))}return{c(){t=h("ul");for(let e=0;e<o.length;e+=1)o[e].c();y(t,"class","svelte-198lrs7")},m(e,s){p(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,[n]){15&n&&(r=e[0],K(),o=se(o,n,a,1,e,r,s,t,oe,Qe,null,Ke),Q())},i(e){if(!n){for(let e=0;e<r.length;e+=1)V(o[e]);n=!0}},o(e){for(let e=0;e<o.length;e+=1)Z(o[e]);n=!1},d(e){e&&$(t);for(let e=0;e<o.length;e+=1)o[e].d()}}}function Ze(e,t,n){const o=q();let{items:s=[]}=t,{selector:r=!1}=t,{selected:a=""}=t;return e.$$set=e=>{"items"in e&&n(0,s=e.items),"selector"in e&&n(2,r=e.selector),"selected"in e&&n(1,a=e.selected)},e.$$.update=()=>{1&e.$$.dirty&&n(0,s=s.map(((e,t)=>(e.leftmost=0===t,e.rightmost=t===s.length-1,e))))},[s,a,r,function(e){r?n(1,a=e.detail.name):o("confirm-click",e.detail)}]}class et extends me{constructor(e){super(),fe(this,e,Ze,Ve,l,{items:0,selector:2,selected:1})}}function tt(e){const t=e-1;return t*t*t+1}function nt(e,{delay:t=0,duration:n=400,easing:o=tt}={}){const s=getComputedStyle(e),r=+s.opacity,a=parseFloat(s.height),l=parseFloat(s.paddingTop),i=parseFloat(s.paddingBottom),c=parseFloat(s.marginTop),u=parseFloat(s.marginBottom),d=parseFloat(s.borderTopWidth),f=parseFloat(s.borderBottomWidth);return{delay:t,duration:n,easing:o,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*r};height: ${e*a}px;padding-top: ${e*l}px;padding-bottom: ${e*i}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*d}px;border-bottom-width: ${e*f}px;`}}function ot(e,t,n){const o=e.slice();return o[9]=t[n],o}function st(e,t){let n,o,s,r=pe(t[0][t[9]])+"";return{key:e,first:null,c(){n=h("li"),o=g(r),s=_(),y(n,"class",t[9]+" dateitem svelte-qey21q"),T(n,"notime",!t[0][t[9]]),this.first=n},m(e,t){p(e,n,t),m(n,o),m(n,s)},p(e,s){t=e,1&s&&r!==(r=pe(t[0][t[9]])+"")&&x(o,r),1&s&&T(n,"notime",!t[0][t[9]])},d(e){e&&$(n)}}}function rt(e){let t,n,o,s,r,a,l,i,c,u,d,f,v,k,w,b,j,C=e[0].text+"",D=[],S=new Map;u=new et({props:{items:e[2]}}),u.$on("confirm-click",e[5]);let z=["date","due","date_created","date_deactivated","date_completed"];const O=e=>e[9];for(let t=0;t<5;t+=1){let n=ot(e,z,t),o=O(n);S.set(o,D[t]=st(o,n))}return k=new Ge({props:{history:e[3]}}),{c(){t=h("div"),n=h("ul"),o=h("li"),s=g(C),r=_(),a=h("li"),l=g(e[1]),i=_(),c=h("li"),ie(u.$$.fragment),d=_();for(let e=0;e<5;e+=1)D[e].c();f=_(),v=h("li"),ie(k.$$.fragment),y(o,"class","text svelte-qey21q"),y(a,"class","status svelte-qey21q"),y(c,"class","actions svelte-qey21q"),y(v,"class","history svelte-qey21q"),y(n,"class","svelte-qey21q"),y(t,"class",w="card "+e[1]+" svelte-qey21q"),T(t,"action-required",e[4]),T(t,"has-due-date",e[0].due)},m(e,$){p(e,t,$),m(t,n),m(n,o),m(o,s),m(n,r),m(n,a),m(a,l),m(n,i),m(n,c),ce(u,c,null),m(n,d);for(let e=0;e<5;e+=1)D[e].m(n,null);m(n,f),m(n,v),ce(k,v,null),j=!0},p(e,[o]){(!j||1&o)&&C!==(C=e[0].text+"")&&x(s,C),(!j||2&o)&&x(l,e[1]);const r={};4&o&&(r.items=e[2]),u.$set(r),1&o&&(z=["date","due","date_created","date_deactivated","date_completed"],D=se(D,o,O,1,e,z,S,n,ne,st,f,ot));const a={};8&o&&(a.history=e[3]),k.$set(a),(!j||2&o&&w!==(w="card "+e[1]+" svelte-qey21q"))&&y(t,"class",w),18&o&&T(t,"action-required",e[4]),3&o&&T(t,"has-due-date",e[0].due)},i(e){j||(V(u.$$.fragment,e),V(k.$$.fragment,e),I((()=>{b||(b=te(t,nt,{},!0)),b.run(1)})),j=!0)},o(e){Z(u.$$.fragment,e),Z(k.$$.fragment,e),b||(b=te(t,nt,{},!1)),b.run(0),j=!1},d(e){e&&$(t),ue(u);for(let e=0;e<5;e+=1)D[e].d();ue(k),e&&b&&b.end()}}}function at(e,t,n){let o,s;const r=q();let{task:a={}}=t,l="",i={defer:{text:"➡️",confirm_text:"Defer?",alt:"Defer Task",name:"defer"},complete:{text:"✅",confirm_text:"Complete?",alt:"Complete Task",name:"complete"},reschedule:{text:"📅",confirm_text:"Reschedule?",alt:"Reschedule Task",name:"reschedule"},cancel:{text:"❌",confirm_text:"Cancel?",alt:"Cancel Task",name:"cancel"},addnote:{text:"📝",confirm_text:"Add Note?",alt:"Cancel Task",name:"addnote"},delegate:{text:"🙋",confirm_text:"Delegate?",alt:"Delegate Task",name:"delegate"},reactivate:{text:"♻️",confirm_text:"Reactivate?",alt:"Reactivate Task",name:"reactivate"},changedue:{text:"⏰",confirm_text:"Change Due?",alt:"Change Due Date",name:"changedue"}},c=[];return e.$$set=e=>{"task"in e&&n(0,a=e.task)},e.$$.update=()=>{1&e.$$.dirty&&n(3,o=function(e){let t=[...e.notes?.map((e=>Object.assign({},e,{type:"note"}))),...e.events?.map((e=>Object.assign({},e,{type:"event"})))];return t.sort(((e,t)=>t.date-e.date)),t}(a)),1&e.$$.dirty&&a.events[0],1&e.$$.dirty&&(a.struck?n(1,l="Struck"):a.date_completed?n(1,l="Completed"):a.date_deactivated?n(1,l="Deactivated"):a.due&&a.due<Date.now()/1e3?n(1,l="Overdue"):"deligate"===a.events[a.events.legnth-1]?.kind?n(1,l="Delegated"):he(a.date)?n(1,l="Forgotten"):ge(a.date)?n(1,l="Future"):n(1,l="Active")),2&e.$$.dirty&&n(4,s="Forgotten"===l||"Overdue"===l),2&e.$$.dirty&&n(2,c="Deactivated"===l||"Completed"===l?[i.reactivate]:[i.complete,i.defer,i.reschedule,i.cancel,i.delegate,i.changedue,i.addnote])},[a,l,c,o,s,function({detail:{name:e}}){r("task-action",{id:a.id,action:e})}]}class lt extends me{constructor(e){super(),fe(this,e,at,rt,l,{task:0})}}function it(e,t,n){const o=e.slice();return o[5]=t[n],o}function ct(e,t){let n,o,s,r;return o=new lt({props:{task:t[5]}}),o.$on("task-action",t[3]),{key:e,first:null,c(){n=h("li"),ie(o.$$.fragment),s=_(),y(n,"class","svelte-18s9pvo"),this.first=n},m(e,t){p(e,n,t),ce(o,n,null),m(n,s),r=!0},p(e,n){t=e;const s={};3&n&&(s.task=t[5]),o.$set(s)},i(e){r||(V(o.$$.fragment,e),r=!0)},o(e){Z(o.$$.fragment,e),r=!1},d(e){e&&$(n),ue(o)}}}function ut(e){let t,n,o=[],s=new Map,r=e[1][e[0]];const a=e=>e[5].id;for(let t=0;t<r.length;t+=1){let n=it(e,r,t),l=a(n);s.set(l,o[t]=ct(l,n))}return{c(){t=h("ul");for(let e=0;e<o.length;e+=1)o[e].c();y(t,"class","svelte-18s9pvo")},m(e,s){p(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){3&n&&(r=e[1][e[0]],K(),o=se(o,n,a,1,e,r,s,t,oe,ct,null,it),Q())},i(e){if(!n){for(let e=0;e<r.length;e+=1)V(o[e]);n=!0}},o(e){for(let e=0;e<o.length;e+=1)Z(o[e]);n=!1},d(e){e&&$(t);for(let e=0;e<o.length;e+=1)o[e].d()}}}function dt(t){let n,o,s=t[0],r=ut(t);return{c(){n=h("div"),r.c()},m(e,t){p(e,n,t),r.m(n,null),o=!0},p(t,[o]){1&o&&l(s,s=t[0])?(K(),Z(r,1,1,e),Q(),r=ut(t),r.c(),V(r),r.m(n,null)):r.p(t,o)},i(e){o||(V(r),o=!0)},o(e){Z(r),o=!1},d(e){e&&$(n),r.d(e)}}}function ft(e,t,n){let o,{tasks:s}=t,{filtermethod:r="current"}=t,a={current:e=>$e(e.date)&&!e.date_completed&&!e.date_deactivated,future:e=>ge(e.date)&&!e.date_completed&&!e.date_deactivated,past:e=>he(e.date),completed:e=>e.date_completed,deactivated:e=>e.date_deactivated,active:e=>!e.date_deactivated&&!e.date_completed};return e.$$set=e=>{"tasks"in e&&n(2,s=e.tasks),"filtermethod"in e&&n(0,r=e.filtermethod)},e.$$.update=()=>{4&e.$$.dirty&&void 0===s&&n(2,s={}),4&e.$$.dirty&&n(1,o=Object.entries(a).map((([e,t])=>[e,Object.values(s).filter(t)])).reduce(((e,[t,n])=>(e[t]=n,e)),{})),2&e.$$.dirty&&console.log(o)},[r,o,s,function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}(e,t)}]}class mt extends me{constructor(e){super(),fe(this,e,ft,dt,l,{tasks:2,filtermethod:0})}}function pt(e){let t,n;return{c(){t=h("div"),n=g(e[2]),y(t,"id","error")},m(e,o){p(e,t,o),m(t,n)},p(e,t){4&t&&x(n,e[2])},d(e){e&&$(t)}}}function $t(t){let n,o,s,a,l,i,c,u,d,f,g,v,x=""!=t[2]&&pt(t);return{c(){n=h("div"),x&&x.c(),o=_(),s=h("form"),a=h("label"),a.textContent="Username:",l=h("input"),i=_(),c=h("label"),c.textContent="Password:",u=h("input"),d=_(),f=h("button"),f.textContent="Login",y(a,"for","username"),y(a,"class","svelte-14nm3ho"),y(l,"id","username"),y(l,"name","username"),y(l,"class","svelte-14nm3ho"),y(c,"for","password"),y(c,"class","svelte-14nm3ho"),y(u,"id","password"),y(u,"name","password"),y(u,"type","password"),y(u,"class","svelte-14nm3ho"),y(f,"class","svelte-14nm3ho"),y(s,"class","svelte-14nm3ho")},m(e,r){var $;p(e,n,r),x&&x.m(n,null),m(n,o),m(n,s),m(s,a),m(s,l),w(l,t[0]),m(s,i),m(s,c),m(s,u),w(u,t[1]),m(s,d),m(s,f),g||(v=[k(l,"input",t[6]),k(u,"input",t[7]),k(f,"click",($=t[3],function(e){return e.preventDefault(),$.call(this,e)}))],g=!0)},p(e,[t]){""!=e[2]?x?x.p(e,t):(x=pt(e),x.c(),x.m(n,o)):x&&(x.d(1),x=null),1&t&&l.value!==e[0]&&w(l,e[0]),2&t&&u.value!==e[1]&&w(u,e[1])},i:e,o:e,d(e){e&&$(n),x&&x.d(),g=!1,r(v)}}}function ht(e,t,n){let{done:o=!1}=t,{current_user:s=null}=t,r="",a="",l="";return e.$$set=e=>{"done"in e&&n(4,o=e.done),"current_user"in e&&n(5,s=e.current_user)},[r,a,l,async function(){n(2,l="");let e=await be(r,a);e.id?(n(4,o=!0),n(5,s=e.id)):n(2,l="Login failed")},o,s,function(){r=this.value,n(0,r)},function(){a=this.value,n(1,a)}]}class gt extends me{constructor(e){super(),fe(this,e,ht,$t,l,{done:4,current_user:5})}}function _t(t){let n,o,s,a,l,i,c,u,d,f=t[1].text+"";return{c(){n=h("div"),o=h("div"),s=g(f),a=_(),l=h("input"),i=_(),c=h("button"),c.textContent="Delegate",y(o,"class","text svelte-aogbz7"),y(l,"type","text"),y(l,"name","name"),y(l,"id","delegate-to"),y(l,"placeholder","To whome"),y(l,"class","svelte-aogbz7"),y(c,"class","svelte-aogbz7"),y(n,"id","delegate-container"),y(n,"class","svelte-aogbz7")},m(e,r){p(e,n,r),m(n,o),m(o,s),m(n,a),m(n,l),w(l,t[0]),m(n,i),m(n,c),u||(d=[k(l,"input",t[6]),k(c,"click",t[2])],u=!0)},p(e,[t]){2&t&&f!==(f=e[1].text+"")&&x(s,f),1&t&&l.value!==e[0]&&w(l,e[0])},i:e,o:e,d(e){e&&$(n),u=!1,r(d)}}}function vt(e,t,n){let o,{current_user:s}=t,{task_id:r}=t,{done:a}=t,l="";return e.$$set=e=>{"current_user"in e&&n(4,s=e.current_user),"task_id"in e&&n(5,r=e.task_id),"done"in e&&n(3,a=e.done)},e.$$.update=()=>{48&e.$$.dirty&&n(1,o=ke[s][r])},[l,o,function(){Se("delegate",s,r,l),n(3,a=!0)},a,s,r,function(){l=this.value,n(0,l)}]}class kt extends me{constructor(e){super(),fe(this,e,vt,_t,l,{current_user:4,task_id:5,done:3})}}function yt(t){let n,o,s,a,l,i,c,u;return{c(){n=h("div"),o=h("textarea"),s=_(),a=h("input"),l=_(),i=h("button"),i.textContent="New Task",y(o,"name","text"),y(o,"id","text"),y(o,"cols","30"),y(o,"rows","7"),y(a,"type","datetime-local"),y(a,"name","due"),y(a,"id","due"),y(a,"class","svelte-c3ku84"),y(i,"class","svelte-c3ku84"),y(n,"id","container"),y(n,"class","svelte-c3ku84")},m(e,r){p(e,n,r),m(n,o),w(o,t[0]),m(n,s),m(n,a),w(a,t[1]),m(n,l),m(n,i),c||(u=[k(o,"input",t[5]),k(a,"input",t[6]),k(i,"click",t[2])],c=!0)},p(e,[t]){1&t&&w(o,e[0]),2&t&&w(a,e[1])},i:e,o:e,d(e){e&&$(n),c=!1,r(u)}}}function xt(e,t,n){let{current_user:o}=t,{done:s}=t,r="",a="";return e.$$set=e=>{"current_user"in e&&n(4,o=e.current_user),"done"in e&&n(3,s=e.done)},[r,a,async function(){let e=null;a&&(e=Math.ceil(new Date(a).getTime()/1e3),console.log(a,e)),await ze(o,r,e),n(3,s=!0)},s,o,function(){r=this.value,n(0,r)},function(){a=this.value,n(1,a)}]}class wt extends me{constructor(e){super(),fe(this,e,xt,yt,l,{current_user:4,done:3})}}function bt(t){let n,o,s,a,l,i;return{c(){n=h("div"),o=h("input"),s=_(),a=h("button"),a.textContent="Reschedule",y(o,"type","datetime-local"),y(o,"name","newdate"),y(o,"id","newdate"),y(o,"placeholder","To whome"),y(o,"class","svelte-aogbz7"),y(a,"class","svelte-aogbz7"),y(n,"id","delegate-container"),y(n,"class","svelte-aogbz7")},m(e,r){p(e,n,r),m(n,o),w(o,t[0]),m(n,s),m(n,a),l||(i=[k(o,"input",t[5]),k(a,"click",t[1])],l=!0)},p(e,[t]){1&t&&w(o,e[0])},i:e,o:e,d(e){e&&$(n),l=!1,r(i)}}}function Tt(e,t,n){let{current_user:o}=t,{task_id:s}=t,{done:r}=t,a="";return e.$$set=e=>{"current_user"in e&&n(3,o=e.current_user),"task_id"in e&&n(4,s=e.task_id),"done"in e&&n(2,r=e.done)},e.$$.update=()=>{24&e.$$.dirty&&ke[o][s]},[a,function(){let e=null;a&&(e=Math.ceil(new Date(a).getTime()/1e3),console.log(a,e),Se("reschedule",o,s,e),n(2,r=!0))},r,o,s,function(){a=this.value,n(0,a)}]}class jt extends me{constructor(e){super(),fe(this,e,Tt,bt,l,{current_user:3,task_id:4,done:2})}}function Ct(t){let n,o,s,a,l,i,c,u;return{c(){n=h("div"),o=h("input"),s=_(),a=h("button"),a.textContent="Change Due",l=_(),i=h("button"),i.textContent="Remove Due",y(o,"type","datetime-local"),y(o,"name","newdate"),y(o,"id","newdate"),y(o,"placeholder","To whome"),y(o,"class","svelte-aogbz7"),y(a,"class","svelte-aogbz7"),y(i,"class","svelte-aogbz7"),y(n,"id","delegate-container"),y(n,"class","svelte-aogbz7")},m(e,r){p(e,n,r),m(n,o),w(o,t[0]),m(n,s),m(n,a),m(n,l),m(n,i),c||(u=[k(o,"input",t[6]),k(a,"click",t[1]),k(i,"click",t[2])],c=!0)},p(e,[t]){1&t&&w(o,e[0])},i:e,o:e,d(e){e&&$(n),c=!1,r(u)}}}function Dt(e,t,n){let{current_user:o}=t,{task_id:s}=t,{done:r}=t,a="";return e.$$set=e=>{"current_user"in e&&n(4,o=e.current_user),"task_id"in e&&n(5,s=e.task_id),"done"in e&&n(3,r=e.done)},e.$$.update=()=>{48&e.$$.dirty&&ke[o][s]},[a,function(){let e=null;a&&(e=Math.ceil(new Date(a).getTime()/1e3),console.log(a,e),Se("changedue",o,s,e),n(3,r=!0))},async function(){await Se("removedue",o,s),n(3,r=!0)},r,o,s,function(){a=this.value,n(0,a)}]}class St extends me{constructor(e){super(),fe(this,e,Dt,Ct,l,{current_user:4,task_id:5,done:3})}}function zt(t){let n,o,s,a,l,i;return{c(){n=h("div"),o=h("textarea"),s=_(),a=h("button"),a.textContent="Add Note",y(o,"name","text"),y(o,"id","text"),y(o,"cols","30"),y(o,"rows","7"),y(a,"class","svelte-aogbz7"),y(n,"id","delegate-container"),y(n,"class","svelte-aogbz7")},m(e,r){p(e,n,r),m(n,o),w(o,t[0]),m(n,s),m(n,a),l||(i=[k(o,"input",t[5]),k(a,"click",t[1])],l=!0)},p(e,[t]){1&t&&w(o,e[0])},i:e,o:e,d(e){e&&$(n),l=!1,r(i)}}}function Ot(e,t,n){let{current_user:o}=t,{task_id:s}=t,{done:r}=t,a="";return e.$$set=e=>{"current_user"in e&&n(3,o=e.current_user),"task_id"in e&&n(4,s=e.task_id),"done"in e&&n(2,r=e.done)},e.$$.update=()=>{24&e.$$.dirty&&ke[o][s],1&e.$$.dirty&&console.log(a)},[a,function(){a&&(Se("addnote",o,s,a),n(2,r=!0))},r,o,s,function(){a=this.value,n(0,a)}]}class Et extends me{constructor(e){super(),fe(this,e,Ot,zt,l,{current_user:3,task_id:4,done:2})}}function qt(e){let t,n,o,s,a,l,i,c,u,d,f,v,w,b,T,j,C,D,S,z,O,E,q,M,N=e[6].title+"";function F(t){e[8](t)}function R(t){e[9](t)}var P=e[6].component;function I(e){let t={task_id:e[2],note_id:e[3],event_id:e[4]};return void 0!==e[5]&&(t.done=e[5]),void 0!==e[1]&&(t.current_user=e[1]),{props:t}}return P&&(S=new P(I(e)),A.push((()=>le(S,"done",F))),A.push((()=>le(S,"current_user",R)))),{c(){t=h("div"),n=_(),o=g(e[2]),s=_(),a=g(e[3]),l=_(),i=g(e[4]),c=_(),u=g(e[0]),d=_(),f=h("div"),v=h("div"),w=h("h3"),b=g(N),T=_(),j=h("button"),j.textContent="X",C=_(),D=h("div"),S&&ie(S.$$.fragment),y(t,"id","modal_blur"),y(t,"class","svelte-xouq8h"),y(w,"class","svelte-xouq8h"),y(j,"class","svelte-xouq8h"),y(v,"id","modal-top"),y(v,"class","svelte-xouq8h"),y(D,"id","modal-main"),y(D,"class","svelte-xouq8h"),y(f,"id","modal"),y(f,"class","svelte-xouq8h")},m(r,$){p(r,t,$),p(r,n,$),p(r,o,$),p(r,s,$),p(r,a,$),p(r,l,$),p(r,i,$),p(r,c,$),p(r,u,$),p(r,d,$),p(r,f,$),m(f,v),m(v,w),m(w,b),m(v,T),m(v,j),m(f,C),m(f,D),S&&ce(S,D,null),E=!0,q||(M=[k(t,"click",e[7]),k(j,"click",e[7])],q=!0)},p(e,t){(!E||4&t)&&x(o,e[2]),(!E||8&t)&&x(a,e[3]),(!E||16&t)&&x(i,e[4]),(!E||1&t)&&x(u,e[0]),(!E||64&t)&&N!==(N=e[6].title+"")&&x(b,N);const n={};if(4&t&&(n.task_id=e[2]),8&t&&(n.note_id=e[3]),16&t&&(n.event_id=e[4]),!z&&32&t&&(z=!0,n.done=e[5],J((()=>z=!1))),!O&&2&t&&(O=!0,n.current_user=e[1],J((()=>O=!1))),P!==(P=e[6].component)){if(S){K();const e=S;Z(e.$$.fragment,1,0,(()=>{ue(e,1)})),Q()}P?(S=new P(I(e)),A.push((()=>le(S,"done",F))),A.push((()=>le(S,"current_user",R))),ie(S.$$.fragment),V(S.$$.fragment,1),ce(S,D,null)):S=null}else P&&S.$set(n)},i(e){E||(S&&V(S.$$.fragment,e),E=!0)},o(e){S&&Z(S.$$.fragment,e),E=!1},d(e){e&&$(t),e&&$(n),e&&$(o),e&&$(s),e&&$(a),e&&$(l),e&&$(i),e&&$(c),e&&$(u),e&&$(d),e&&$(f),S&&ue(S),q=!1,r(M)}}}function Mt(e){let t,n,o=""!=e[0]&&qt(e);return{c(){o&&o.c(),t=v()},m(e,s){o&&o.m(e,s),p(e,t,s),n=!0},p(e,[n]){""!=e[0]?o?(o.p(e,n),1&n&&V(o,1)):(o=qt(e),o.c(),V(o,1),o.m(t.parentNode,t)):o&&(K(),Z(o,1,1,(()=>{o=null})),Q())},i(e){n||(V(o),n=!0)},o(e){Z(o),n=!1},d(e){o&&o.d(e),e&&$(t)}}}function At(e,t,n){let o,{current_user:s=null}=t,{task_id:r=null}=t,{note_id:a=null}=t,{event_id:l=null}=t,{modal_name:i=""}=t,c={login:{title:"Login As New User",component:gt},delegate_task:{title:"Delegate Task",component:kt},addnew:{title:"Add New Task",component:wt},reschedule:{title:"Reschedule Task",component:jt},changedue:{title:"Change Task Due Date",component:St},addnote:{title:"Add New Task",component:Et}};function u(){console.log("doing?"),n(0,i=""),n(5,d=!1)}let d=!1;return e.$$set=e=>{"current_user"in e&&n(1,s=e.current_user),"task_id"in e&&n(2,r=e.task_id),"note_id"in e&&n(3,a=e.note_id),"event_id"in e&&n(4,l=e.event_id),"modal_name"in e&&n(0,i=e.modal_name)},e.$$.update=()=>{1&e.$$.dirty&&n(6,o=c[i]),32&e.$$.dirty&&d&&u()},[i,s,r,a,l,d,o,u,function(e){d=e,n(5,d)},function(e){s=e,n(1,s)}]}class Nt extends me{constructor(e){super(),fe(this,e,At,Mt,l,{current_user:1,task_id:2,note_id:3,event_id:4,modal_name:0})}}function Ft(e){let t,o,s,r,a,l,i,c,u,d,f,m,g,v,k,y;function x(t){e[8](t)}let w={userlist:e[1]};function b(t){e[9](t)}void 0!==e[0]&&(w.current_user=e[0]),o=new Pe({props:w}),A.push((()=>le(o,"current_user",x)));let T={tasks:e[5]};function j(t){e[10](t)}void 0!==e[2]&&(T.filtermethod=e[2]),l=new mt({props:T}),A.push((()=>le(l,"filtermethod",b))),l.$on("task-action",e[6]);let C={};void 0!==e[2]&&(C.filtermethod=e[2]),d=new Xe({props:C}),A.push((()=>le(d,"filtermethod",j))),d.$on("addnew",e[7]);const D=[e[3]];function S(t){e[11](t)}function z(t){e[12](t)}let O={};for(let e=0;e<D.length;e+=1)O=n(O,D[e]);return void 0!==e[0]&&(O.current_user=e[0]),void 0!==e[4]&&(O.modal_name=e[4]),g=new Nt({props:O}),A.push((()=>le(g,"current_user",S))),A.push((()=>le(g,"modal_name",z))),{c(){t=h("header"),ie(o.$$.fragment),r=_(),a=h("main"),ie(l.$$.fragment),c=_(),u=h("footer"),ie(d.$$.fragment),m=_(),ie(g.$$.fragment)},m(e,n){p(e,t,n),ce(o,t,null),p(e,r,n),p(e,a,n),ce(l,a,null),p(e,c,n),p(e,u,n),ce(d,u,null),p(e,m,n),ce(g,e,n),y=!0},p(e,[t]){const n={};2&t&&(n.userlist=e[1]),!s&&1&t&&(s=!0,n.current_user=e[0],J((()=>s=!1))),o.$set(n);const r={};32&t&&(r.tasks=e[5]),!i&&4&t&&(i=!0,r.filtermethod=e[2],J((()=>i=!1))),l.$set(r);const a={};!f&&4&t&&(f=!0,a.filtermethod=e[2],J((()=>f=!1))),d.$set(a);const c=8&t?re(D,[ae(e[3])]):{};!v&&1&t&&(v=!0,c.current_user=e[0],J((()=>v=!1))),!k&&16&t&&(k=!0,c.modal_name=e[4],J((()=>k=!1))),g.$set(c)},i(e){y||(V(o.$$.fragment,e),V(l.$$.fragment,e),V(d.$$.fragment,e),V(g.$$.fragment,e),y=!0)},o(e){Z(o.$$.fragment,e),Z(l.$$.fragment,e),Z(d.$$.fragment,e),Z(g.$$.fragment,e),y=!1},d(e){e&&$(t),ue(o),e&&$(r),e&&$(a),ue(l),e&&$(c),e&&$(u),ue(d),e&&$(m),ue(g,e)}}}function Rt(e,t,n){let o;ye();let s=Object.keys(ve)[0],r=Object.values(ve);console.log(r);let a="current",l={modal_name:"login"},i="";function c(){n(1,r=Object.values(ve)),n(5,o=ke[s])}we({login_change:c,tasks_change:c});const u={defer:e=>Se("defer",s,e),complete:e=>Se("complete",s,e),reactivate:e=>Se("reactivate",s,e),cancel:e=>Se("cancel",s,e),strike:e=>Se("strike",s,e),unstrike:e=>Se("unstrike",s,e),delegate:e=>{n(3,l={modal_name:"delegate_task",task_id:e,current_user:s})},reschedule:e=>{n(3,l={modal_name:"reschedule",task_id:e,current_user:s})},changedue:e=>{n(3,l={modal_name:"changedue",task_id:e,current_user:s})},addnote:e=>{n(3,l={modal_name:"addnote",task_id:e,current_user:s})}};return e.$$.update=()=>{3&e.$$.dirty&&"logout"===s&&n(0,s=r[r.length-1]?.id),1&e.$$.dirty&&n(5,o=ke[s]),1&e.$$.dirty&&"new"===s&&n(4,i="login"),1&e.$$.dirty&&void 0===s&&n(4,i="login")},[s,r,a,l,i,o,function({detail:{id:e,action:t}}){console.log(e,t),u[t](e)},function(){n(3,l={modal_name:"addnew",current_user:s})},function(e){s=e,n(0,s),n(1,r)},function(e){a=e,n(2,a)},function(e){a=e,n(2,a)},function(e){s=e,n(0,s),n(1,r)},function(e){i=e,n(4,i),n(0,s),n(1,r)}]}window.api=Oe;return new class extends me{constructor(e){super(),fe(this,e,Rt,Ft,l,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
